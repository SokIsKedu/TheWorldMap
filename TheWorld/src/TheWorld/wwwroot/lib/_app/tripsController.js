!function(){"use strict";function e(e){var r=this;r.trips=[],r.newTrip={},r.name="lopas",r.errorMessage="",r.isBusy=!0;var n="/api/trips";r.reverse=!1,r.propertyName="name",r.sortBy=function(e){r.reverse=r.propertyName===e&&!r.reverse,r.propertyName=e},e.get(n).then(function(e){angular.copy(e.data,r.trips)},function(e){r.errorMessage="Failed to load data: "+e}).finally(function(){r.isBusy=!1}),r.addTrip=function(){r.errorMessage="",t(r.newTrip)?r.errorMessage="Name already exists":(r.isBusy=!0,e.post(n,r.newTrip).then(function(e){r.trips.push(e.data),r.newTrip={}},function(){r.errorMessage="Failed to save new trip"}).finally(function(){r.isBusy=!1}))},r.removeTrip=function(t){alert("eina"),r.errorMessage="",r.isBusy=!0;var i=r.trips.indexOf(t);e.delete(n+"/deltrip/"+t.name).then(function(e){r.trips.splice(i,1),alert("eina")},function(e){r.errormessage="Failed to remove trip",window.alert(r.errormessage)}).finally(function(){r.isBusy=!1})};var t=function(e){for(var n=!1,t=0;t<r.trips.length;t++)if(e.name==r.trips[t].name)return alert(!n),!n;return n}}angular.module("app-trips").controller("tripsController",e)}();