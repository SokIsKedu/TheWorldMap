@model TheWorld.ViewModels.LoginViewModel
@{ 
    ViewBag.Title = "Login";
}
@section scripts{
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/lib/angular/angular.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>
    <script src="~/js/login.js"></script>
    <script src="~/js/app-auth.js"></script>
    <script src="~/js/authController.js"></script>
}

   
        <div class="container" ng-app="app-auth" ng-controller="authenticationController">
            
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <div class="panel panel-login">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-6" >
                                    <a href="#" class="active" id="login-form-link" ng-click="switchLogin()">Login</a>
                                </div>
                                <div class="col-xs-6">
                                    <a href="#" id="register-form-link" ng-click="switchReg()">Register</a>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-lg-12">
                                

                                    <div ng-show="showLog">
                                        
                                        <form action="" id="login-form" method="post" style="display: block;" novalidate >
                                            @if (ViewBag.UserMessage != null)
                                            {
                                                <div class="text-danger">@Html.ViewBag.UserMessage</div>
                                            }
                                            

                                            <div class="form-group">
                                                
                                                <input  id="username" class="form-control" placeholder="Username" asp-for="Username">
                                                <span asp-validation-for="Username" class="text-muted"></span>

                                            </div>
                                            <div class="form-group">
                                                <input type="password" id="password" class="form-control" placeholder="Password" asp-for="Password">
                                                <span asp-validation-for="Password" class="text-muted"></span>
                                            </div>

                                            <div class="form-group text-center">
                                                <input type="checkbox" class="" name="remember" id="remember">
                                                <label for="remember"> Remember Me</label>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-sm-6 col-sm-offset-3">
                                                        <input type="submit" name="login-submit" id="login-submit" class="form-control btn btn-login" value="Log In">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="text-center">
                                                            <a href="" tabindex="5" class="forgot-password">Forgot Password?</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                     </div>
                                    <div ng-show="showReg">
                                        <div >
                                            <form novalidate id="register-form" method="post" role="form" style="display: none;">
                                                <div class="form-group">
                                                    <input ng-change="registerUser()" type="text" id="username" tabindex="1" class="form-control" placeholder="Username" value="" ng-model="UserInfo.Username" />
                                                    <span ng-show="!regValid.Username.valid" class="text-muted">  {{regValid.Username.errorMessage}}</span>

                                                </div>
                                                <div class="form-group">
                                                    <input ng-change="registerUser()" type="email" id="email" tabindex="1" class="form-control" placeholder="Email Address" value="" ng-model="UserInfo.Email">
                                                    <span ng-show="!regValid.Email.valid" class="text-muted">  {{regValid.Email.errorMessage}}</span>

                                                </div>
                                                <div class="form-group">
                                                    <input ng-change="registerUser()" type="password" id="password" tabindex="2" class="form-control" placeholder="Password" ng-model="UserInfo.Password">
                                                    <div><span ng-show="!regValid.Password.valid" class="text-muted">  {{regValid.Password.errorMessage.lengthError}}</span></div>
                                                    <div><span ng-show="!regValid.Password.valid" class="text-muted">  {{regValid.Password.errorMessage.alphaError}}</span></div>
                                                    <div><span ng-show="!regValid.Password.valid" class="text-muted">  {{regValid.Password.errorMessage.upperError}}</span></div>
                                                    <div><span ng-show="!regValid.Password.valid" class="text-muted">  {{regValid.Password.errorMessage.digitError}}</span></div>

                                                </div>
                                                <div class="form-group">
                                                    <input ng-change="registerUser()" type="password" id="confirm-password" tabindex="2" class="form-control" placeholder="Confirm Password" ng-model="UserInfo.ConfPassword">
                                                    <span ng-show="!regValid.ConfPassword.valid" class="text-muted">  {{regValid.ConfPassword.errorMessage}}</span>
                                                </div>
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-sm-6 col-sm-offset-3">
                                                            <button name="register-submit" id="register-submit" tabindex="4" class="form-control btn btn-register" ng-click="switchReg();registerUser()">Register Now</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    

@*<h3>Login</h3>
<form method="post" novalidate>
    @if (ViewBag.UserMessage != null)
            {
        <div>@Html.ViewBag.UserMessage</div>


    }
    <div asp-validation-summary="ModelOnly"></div>

    <div class="form-group">
        <label asp-for="Username"></label>
        <input asp-for="Username" class="form-control" />
        <span asp-validation-for="Username" class="text-muted"></span>
    </div>

    <div class="form-group">
        <label asp-for="Password"></label>
        <input type="password" asp-for="Password" class="form-control" />
        <span asp-validation-for="Password" class="text-muted"></span>
    </div>

    <div class="form-group">
        <input type="submit" value="Login" class="btn btn-success" />
    </div>

</form>*@